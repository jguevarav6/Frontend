<aside
  [class.collapsed]="collapsed"
  class="sticky top-0
         h-auto lg:h-[100svh]
         w-full lg:w-72 min-w-full lg:min-w-72 flex-none
         lg:overflow-y-auto
         flex flex-col
         bg-white/95 dark:bg-background-dark/80 backdrop-blur-sm
         p-4 sm:p-5 lg:p-6
         border-b lg:border-b-0 lg:border-r
         border-subtle-light dark:border-subtle-dark">

  <!-- Header: logo (imagen) + nombre debajo -->
  <div class="p-1 sm:p-2 mb-6 lg:mb-8">
    <!-- Collapse toggle (visible on small screens and as small icon on desktop) -->
    <button aria-label="Toggle sidebar" class="sidebar-toggle mb-3 lg:mb-4" (click)="toggle()">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M4 12h16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M4 6h10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" opacity="0.6"/>
      </svg>
    </button>
    <div class="flex flex-col items-center text-center max-w-[14rem] mx-auto">
      <!-- LOGO limpio, responsive -->
      <img
        src="assets/logo.png"
        alt="BELTRÁN MARTÍNEZ &amp; ASOCIADOS — Impuestos y Contabilidad"
        class="h-16 sm:h-20 w-auto rounded-xl object-contain ring-1 ring-black/5 shadow-sm"
        decoding="async"
        fetchpriority="high"
      />

      <!-- Nombre debajo -->
      <h1
        class="mt-3 leading-snug font-semibold text-primary
               text-[14px] sm:text-[15px]
               whitespace-normal break-words text-center">
        BELTRÁN MARTÍNEZ &amp; ASOCIADOS
      </h1>
      <p class="text-[11px] sm:text-[12px] text-gray-500 mt-1">Asesoría fiscal y contable</p>
    </div>
  </div>

  <!-- Navegación -->
  <nav class="flex flex-col gap-2">
    <a
      class="group flex items-center gap-3 rounded-lg px-4 py-3 sm:py-3.5 font-medium
             bg-primary/10 dark:bg-primary/20 text-primary dark:text-secondary"
      href="#"
    >
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="shrink-0" aria-hidden="true">
        <rect x="3" y="3" width="8" height="8" rx="2" stroke="currentColor" stroke-width="1.75" />
        <rect x="13" y="3" width="8" height="5" rx="2" stroke="currentColor" stroke-width="1.75" />
        <rect x="13" y="10" width="8" height="11" rx="2" stroke="currentColor" stroke-width="1.75" />
        <rect x="3" y="13" width="8" height="8" rx="2" stroke="currentColor" stroke-width="1.75" />
      </svg>
      <span class="text-sm sm:text-base">Panel Principal</span>
    </a>

    <a
      class="group flex items-center gap-3 rounded-lg px-4 py-3 sm:py-3.5 font-medium
             text-gray-700 dark:text-gray-300 hover:bg-primary/5 dark:hover:bg-primary/10
             hover:text-primary dark:hover:text-secondary transition-colors"
      href="#"
    >
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="shrink-0" aria-hidden="true">
        <path
          d="M3 17.25V21h3.75L18.8 8.95a1.5 1.5 0 000-2.12l-2.63-2.63a1.5 1.5 0 00-2.12 0L3 17.25z"
          stroke="currentColor"
          stroke-width="1.75"
          fill="none"
        />
      </svg>
      <span class="text-sm sm:text-base">Declaraciones</span>
    </a>

    <a
      class="group flex items-center gap-3 rounded-lg px-4 py-3 sm:py-3.5 font-medium
             text-gray-700 dark:text-gray-300 hover:bg-primary/5 dark:hover:bg-primary/10
             hover:text-primary dark:hover:text-secondary transition-colors"
      href="#"
    >
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="shrink-0" aria-hidden="true">
        <rect x="3" y="6" width="18" height="12" rx="2.5" stroke="currentColor" stroke-width="1.75" />
        <rect x="6" y="11" width="8" height="2" rx="1" fill="currentColor" />
      </svg>
      <span class="text-sm sm:text-base">Pagos</span>
    </a>

    <a
      class="group flex items-center gap-3 rounded-lg px-4 py-3 sm:py-3.5 font-medium
             text-gray-700 dark:text-gray-300 hover:bg-primary/5 dark:hover:bg-primary/10
             hover:text-primary dark:hover:text-secondary transition-colors"
      href="#"
    >
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" class="shrink-0" aria-hidden="true">
        <path
          d="M3 7.5A2.5 2.5 0 015.5 5H9l2 2h7.5A2.5 2.5 0 0121 9.5V18a3 3 0 01-3 3H6a3 3 0 01-3-3V7.5z"
          stroke="currentColor"
          stroke-width="1.75"
          fill="none"
        />
      </svg>
      <span class="text-sm sm:text-base">Mis Documentos</span>
    </a>
  </nav>

  <!-- TaxHelp -->
  <div class="mt-auto pt-6 lg:pt-8">
    <div class="rounded-xl p-5 sm:p-6 text-center border border-subtle-light dark:border-subtle-dark">
      <h3 class="font-heading font-bold text-accent text-base sm:text-lg mb-2">TaxHelp</h3>
      <p class="text-sm text-gray-600 dark:text-gray-300 mb-3">
        ¿Necesitas asistencia? Estamos aquí para guiarte.
      </p>

      <a
        href="https://bmasociados.co/"
        target="_blank"
        rel="noopener"
        class="inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg
               bg-blue-600 text-white font-semibold hover:brightness-110"
      >
        <span>Contáctenos</span>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M8 5l8 7-8 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </a>
    </div>
  </div>
</aside>

<!-- Fixed handle shown only when sidebar is collapsed to reopen it -->
<button *ngIf="collapsed" aria-label="Open sidebar" class="sidebar-handle" (click)="toggle()">
  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
    <path d="M20 12H4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M14 6H4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" opacity="0.6"/>
  </svg>
</button>
